<%= render "home/navbar" %>	

<div class="container mt-5">
	<div class="d-flex justify-content-between">
		<h3 class="mb-3">Properties</h3>
		<h3>Property Count: <span class="text-primary"><%= current_user.properties.count  %> </span></h3>
	</div>
	
<div class="table-responsive  ">
<table class="table table-striped table-hover table-bordered">
  <thead class="table-primary">
    <tr class="text-center ">
      <th scope="col">ID</th>
      <th scope="col">Name</th>
      <th scope="col">price</th>
      <th scope="col" >Property Type</th>
      <th scope="col" >Flat Type</th>
      <th scope="col" >Status</th>
      <th scope="col" >Publish</th>


      <th scope="col" >Actions </th>
      <th scope="col" >Publish Property </th>



      


    </tr>
  </thead>
  <tbody class="">
  	<% current_user.properties.each do |property| %>
    <tr  class="align-middle text-center">
      <th scope="row"><%= property.id %></th>
      <td><%= property.name %></td>
      <td ><%= number_to_currency(property.price,:unit => "â‚¹ ") %></td>
      <td ><%= property.prop_type %></td>
      <% if property.flat_details %>
      	<td ><%= property.flat_details %></td>
      <% else %>
      	<td > NA </td>
      <% end %>

      <td class="<%= property.status == "available" ? 'text-success': 'text-danger' %>"> <%= property.status %></td>
      <td class=" <%= property.publish == "YES" ? 'text-success': 'text-danger' %>"> <%= property.publish %></td>
      <td >
      	<%= link_to "View more" ,user_property_path(current_user,property.id)  ,class: "btn btn-outline-primary" %>
      	<%= link_to "Edit" ,edit_user_property_path(current_user,property) ,class: "btn btn-outline-primary" %>
      	<%= link_to "Delete" ,[current_user,property],data:{ turbo_method: :delete,turbo_confirm: "Are you sure?" } ,class: "btn btn-outline-primary" %>
      	
      </td>
      <td>
      	<% if property.publish == "NO" %>
      		<%= link_to "Publish" ,user_property_update_publish_path(current_user,property.id,1),class: "btn btn-outline-primary",data: { turbo_method: :put,turbo_confirm: 'Are you sure you want to publish these posts?'}%>
      	<% else %>
      		<p class="text-secondary">published</p>
      	<% end %>
      </td>
    </tr>
    <% end %>
    
  </tbody>
</table>
</div>
</div>






<%= render "home/footer" %>
	